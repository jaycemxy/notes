<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="//cdn.bootcss.com/vue/2.5.16/vue.js"></script>
    <script src="//cdn.bootcss.com/vue/2.5.16/vue.min.js"></script>
</head>

<body>
    <div id="root">
        <counter :count="2" @inc="handleIncrease"></counter>
        <counter :count="3" @inc="handleIncrease"></counter>
        <div>{{ total }}</div>
    </div>


    <script>
        var counter = {
            props: ['count'], //接收父组件中的数据
            data: function () {
                return {
                    number: this.count //子组件不能随意更改父组件中的数据，只能通过克隆一个副本再在子组件内部进行修改，这里克隆了父组件中的count数据，子组件通过操作number就能更改父组件中的数据
                }
            },
            template: '<div @click="handleClick">{{ number }}</div>',
            methods: {
                handleClick: function () {
                    this.number = this.number + 2;
                    this.$emit('inc', 2)  //这里的第二个参数是每点击一次加多少值
                }
            }
        }

        var vm = new Vue({
                el: '#root',
                data: {
                    total: 5
                },
                components: {
                    counter: counter
                },
                methods: {
                    handleIncrease: function (step) {  //这里的step是$emit里传过来的第二个参数
                        this.total += step
                    }
                }
            }) 
    </script>        
</body>

</html>